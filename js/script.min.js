const popupMap=document.querySelector(".popup--map"),popupWriteUs=document.querySelector(".popup--write-us"),popupAlert=document.querySelector(".popup--alert"),mapBtn=document.querySelector(".map-btn"),writeUsBtn=document.querySelector(".btn--ask-us"),cartBtnsArray=document.querySelectorAll(".card__btn--cart");let lastFocus;function showPopupWriteUs(){lastFocus=document.activeElement,popupWriteUs.classList.add("popup--show","popup--bounce");const e=popupWriteUs.querySelector("#write-us__login"),t=popupWriteUs.querySelector("#write-us__email"),o=popupWriteUs.querySelector("#write-us__message"),r=popupWriteUs.querySelector("#writeUs-submit"),p=popupWriteUs.querySelector(".write-us");function s(e){e.addEventListener("blur",()=>{e.value&&localStorage.setItem(e.id,e.value)})}function c(e){e.classList.remove("popup--error","popup--bounce"),setTimeout(()=>{e.classList.add("popup--error")},0)}try{var l=localStorage.getItem(e.id),u=localStorage.getItem(t.id);l&&(e.value=l),u&&(t.value=u),(l?u?o:t:e).focus(),s(e),s(t)}catch(e){console.log("LocalStorage в данном браузере не работает")}p.addEventListener("submit",e=>{t.value&&t.value&&o.value||(e.preventDefault(),c(popupWriteUs))}),r.addEventListener("click",()=>{e.validity.valid&&t.validity.valid&&o.validity.valid||c(popupWriteUs)})}function closePopups(){popupMap&&popupMap.classList.remove("popup--show","popup--bounce"),popupWriteUs&&popupWriteUs.classList.remove("popup--show","popup--error","popup--bounce"),popupAlert&&popupAlert.classList.remove("popup--show","popup--bounce"),lastFocus.focus()}mapBtn&&mapBtn.addEventListener("click",()=>{popupMap.classList.add("popup--show","popup--bounce"),lastFocus=document.activeElement,popupMap.querySelector(".popup__js-close").focus()}),writeUsBtn&&writeUsBtn.addEventListener("click",e=>{e.preventDefault(),showPopupWriteUs()}),cartBtnsArray&&cartBtnsArray.forEach(e=>{e.addEventListener("click",()=>{lastFocus=document.activeElement,popupAlert.classList.add("popup--show","popup--bounce"),popupAlert.querySelector("#alert-toCartBtn").focus()})}),document.querySelectorAll(".popup__js-close").forEach(e=>{e.addEventListener("click",()=>{closePopups()})}),window.addEventListener("keydown",e=>{27==e.keyCode&&closePopups()});const promoItemSlider=document.querySelector(".promo__item--slider");if(promoItemSlider){const r=promoItemSlider.querySelectorAll(".promo__slide"),s=promoItemSlider.querySelectorAll(".pagination__btn"),t=promoItemSlider.querySelector("#slider-btn-prev"),u=promoItemSlider.querySelector("#slider-btn-next"),v="pagination__btn--current",w="promo__slide--current",x=r.length;let o=1;function setSlide(e){o=e,r.forEach(e=>{e.classList.remove(w)}),s.forEach(e=>{e.classList.remove(v)}),r[e].classList.add(w),s[e].classList.add(v)}function calcNextSlide(e){return 0!=o||e?o==x-1&&e?0:o<x-1&&e?o+1:0<o&&!e?o-1:void 0:x-1}s.forEach((e,t)=>{e.addEventListener("click",()=>{t<x&&setSlide(t)})}),t.addEventListener("click",()=>{setSlide(calcNextSlide(!1))}),u.addEventListener("click",()=>{setSlide(calcNextSlide(!0))})}const servicesContent=document.querySelector(".services__content");if(servicesContent){const F=servicesContent.querySelectorAll(".services__menu li .tab-btn"),G=servicesContent.querySelectorAll(".tabs__item"),H="tabs__current",I="tab-btn--current",J=G.length;function setTab(e){e<J&&(G.forEach(e=>{e.classList.remove(H)}),F.forEach(e=>{e.classList.remove(I)}),G[e].classList.add(H),F[e].classList.add(I))}F.forEach((e,t)=>{e.addEventListener("click",()=>{setTab(t)})})}